diff -uNr erlang-pbc-orig/c_src/cmake/FindGMP.cmake erlang-pbc-patched/c_src/cmake/FindGMP.cmake
--- erlang-pbc-orig/c_src/cmake/FindGMP.cmake	2021-03-08 23:57:41.000000000 +0200
+++ erlang-pbc-patched/c_src/cmake/FindGMP.cmake	2021-03-28 23:28:34.800645190 +0300
@@ -50,8 +50,8 @@
 pkg_check_modules(PKG QUIET gmp gmpxx)
 
 # Try to locate the libraries and their headers, using pkg-config hints
-find_path(GMP_INCLUDE_DIR gmp.h HINTS ${PKG_gmp_INCLUDEDIR} $ENV{CMAKE_INCLUDE_DIR})
-find_library(GMP_LIB gmp HINTS ${PKG_gmp_LIBDIR} $ENV{CMAKE_LIBRARY_PATH})
+set(GMP_INCLUDE_DIR $ENV{STAGING_DIR}/usr/include)
+set(GMP_LIB $ENV{STAGING_DIR}/usr/lib/libgmp.so)
 
 # Remove these variables from cache inspector
 mark_as_advanced(GMP_INCLUDE_DIR GMP_LIB)
diff -uNr erlang-pbc-orig/c_src/cmake/FindPBC.cmake erlang-pbc-patched/c_src/cmake/FindPBC.cmake
--- erlang-pbc-orig/c_src/cmake/FindPBC.cmake	2021-03-08 23:57:41.000000000 +0200
+++ erlang-pbc-patched/c_src/cmake/FindPBC.cmake	2021-03-28 23:35:09.325108806 +0300
@@ -11,9 +11,11 @@
 set(CONFIGURE_ARGS $ENV{CONFIGURE_ARGS})
 separate_arguments(CONFIGURE_ARGS)
 
+string(REPLACE "-L " "-L" LDFLAGS2 $ENV{LDFLAGS})
+
 set(CONFIGURE_CFLAGS   "$ENV{CFLAGS}   ${CMAKE_C_FLAGS_${BUILD_TYPE_UC}}")
 set(CONFIGURE_CPPFLAGS "$ENV{CPPFLAGS} -I${GMP_INCLUDE_DIR}")
-set(CONFIGURE_LDFLAGS  "$ENV{LDFLAGS}  -L${CMAKE_CURRENT_BINARY_DIR}/lib\ -L${GMP_LIB_DIR}")
+set(CONFIGURE_LDFLAGS  "${LDFLAGS2}    -L${CMAKE_CURRENT_BINARY_DIR}/lib\ -L${GMP_LIB_DIR}")
 
 ExternalProject_Add(pbc
   PREFIX            ${CMAKE_CURRENT_BINARY_DIR}/external-pbc
@@ -24,6 +26,7 @@
   CONFIGURE_COMMAND autoreconf --install > /dev/null 2>&1 || autoreconf &&
                     ./configure
                     --prefix=${CMAKE_CURRENT_BINARY_DIR}
+                    --host=arm
                     --with-pic
                     --disable-shared
                     --enable-optimized
